<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treatment of Malnutrition for Infants and Pregnant Women in Gaza Strip :: Urgent Relief</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .language-switch {
            text-align: right;
            margin-bottom: 20px;
        }
        .language-switch button {
            padding: 5px 10px;
            margin-left: 5px;
        }
        .content-wrapper {
            display: flex;
            flex-direction: row-reverse;
            justify-content: space-between;
            align-items: flex-start;
        }
        .main-image-container {
            width: 70%;
        }
        .main-image {
            width: 100%;
            height: auto;
            display: block;
        }
        .donation-section {
            width: 25%;
        }
        .currency-selector {
            display: flex;
            justify-content: flex-start;
            margin-bottom: 15px;
        }
        .currency-option {
            padding: 5px 10px;
            margin-right: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .currency-option.selected {
            background-color: #45a049;
        }
        .donation-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        .donation-option {
            padding: 8px 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            text-align: center;
            font-size: 14px;
        }
        .custom-amount-container {
            display: flex;
            justify-content: flex-start;
            margin-bottom: 15px;
        }
        #custom-amount {
            width: 150px;
            padding: 10px;
            margin-right: 10px;
        }
        .custom-donate-btn {
            padding: 10px 20px;
            background-color: #b11f1f;
            color: white;
            border: none;
            cursor: pointer;
        }
        .description {
            background-color: #f5f5f5;
            padding: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="language-switch">
        <button onclick="switchLanguage('ar')">العربية</button>
        <button onclick="switchLanguage('en')">English</button>
    </div>

    <h1>Treatment of Malnutrition for Infants and Pregnant Women in Gaza Strip</h1>

    <div class="content-wrapper">
        <div class="main-image-container">
            <img class="main-image" src="https://ksr.org.kw/images/detailed/9/علاج_سوء_التغذية_-_غزة_web-100.jpg" alt="Gaza Strip Relief">
        </div>
        <div class="donation-section">
            <div class="currency-selector">
                <button class="currency-option selected" data-currency="KWD">KWD</button>
                <button class="currency-option" data-currency="USD">USD</button>
            </div>

            <div class="donation-options">
                <button class="donation-option" data-amount="10">10 KWD</button>
                <button class="donation-option" data-amount="20">20 KWD</button>
                <button class="donation-option" data-amount="50">50 KWD</button>
                <button class="donation-option" data-amount="100">100 KWD</button>
            </div>

            <div class="custom-amount-container">
                <input type="number" id="custom-amount" placeholder="Other amount">
                <button class="custom-donate-btn">Donate</button>
            </div>
        </div>
    </div>

    <div class="description">
        <p>The ongoing aggression on the people of Gaza Strip for more than 11 months has resulted in <strong>50,000 children</strong> in northern Gaza suffering from malnutrition.</p>
        <p>During the war period, at least <strong>60,000 pregnant women</strong> suffered from malnutrition, and about <strong>45 people, including children,</strong> died due to the same suffering.</p>
        <p>In southern Gaza, nearly <strong>4,000 children</strong> are suffering from symptoms of severe acute malnutrition that can lead to death, and thousands more lack nutritional supplements, therapeutic foods, and appropriate treatments for malnutrition cases ranging from normal to acute and severe.</p>
    </div>

    <script>
        console.log('Script started');

        function switchLanguage(lang) {
            if (lang === 'ar') {
                window.location.href = 'https://ksr.org.kw/458/?marketer=i'; // Arabic version URL
            }
        }

        const baseUrl = "https://www.paypal.com/donate/?business=YHK9AGQZJWJEU&no_recurring=0&item_name=Help+People+in+Gaza+%0A%D8%B3%D8%A7%D8%B9%D8%AF%D9%88%D8%A7+%D8%A7%D9%87%D9%84+%D8%BA%D8%B2%D9%87+%0A&currency_code=USD";
        let selectedCurrency = 'KWD';

        async function getExchangeRate() {
            try {
                console.log('Fetching exchange rate...');
                const response = await fetch('https://v6.exchangerate-api.com/v6/YOUR_API_KEY/latest/KWD');
                const data = await response.json();
                if (data.result === "success") {
                    console.log('Exchange rate fetched successfully:', data.conversion_rates.USD);
                    return data.conversion_rates.USD;
                } else {
                    console.error('Failed to fetch exchange rate:', data);
                    return 3.25; // Fallback rate
                }
            } catch (error) {
                console.error('Error fetching exchange rate:', error);
                return 3.25; // Fallback rate
            }
        }

        document.querySelectorAll('.currency-option').forEach(option => {
            option.addEventListener('click', function() {
                console.log('Currency option clicked:', this.dataset.currency);
                document.querySelectorAll('.currency-option').forEach(btn => btn.classList.remove('selected'));
                this.classList.add('selected');
                selectedCurrency = this.dataset.currency;
                updateDonationAmounts();
            });
        });

        function updateDonationAmounts() {
            console.log('Updating donation amounts');
            const options = document.querySelectorAll('.donation-option');
            options.forEach(option => {
                const amount = option.dataset.amount;
                option.textContent = `${amount} ${selectedCurrency}`;
            });
        }

        document.querySelectorAll('.donation-option').forEach(option => {
            option.addEventListener('click', async function() {
                console.log('Donation option clicked:', this.dataset.amount);
                let amount = this.dataset.amount;
                if (selectedCurrency === 'KWD') {
                    const exchangeRate = await getExchangeRate();
                    amount = (parseFloat(amount) * exchangeRate).toFixed(2); // Convert KWD to USD
                    console.log('Converted amount:', amount);
                }
                const donationUrl = `${baseUrl}&amount=${amount}`;
                console.log('Opening donation URL:', donationUrl);
                window.open(donationUrl, '_blank');
            });
        });

        document.querySelector('.custom-donate-btn').addEventListener('click', async function() {
            console.log('Custom donate button clicked');
            let amount = document.getElementById('custom-amount').value;
            if (amount) {
                if (selectedCurrency === 'KWD') {
                    const exchangeRate = await getExchangeRate();
                    amount = (parseFloat(amount) * exchangeRate).toFixed(2); // Convert KWD to USD
                    console.log('Converted custom amount:', amount);
                }
                const donationUrl = `${baseUrl}&amount=${amount}`;
                console.log('Opening custom donation URL:', donationUrl);
                window.open(donationUrl, '_blank');
            } else {
                console.log('No amount entered');
                alert('Please enter a valid amount');
            }
        });

        // Initialize the donation amounts
        updateDonationAmounts();

        console.log('Script finished loading');
    </script>
</body>
</html>
